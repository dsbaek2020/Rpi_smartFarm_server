
플라스크와 리액트로 라즈베리파이 시스템 상태를 전송하는 서버를 구축하라
ChatGPT
리액트와 플라스크를 사용하여 라즈베리파이의 시스템 상태를 전송하는 서버를 구축하는 단계는 다음과 같습니다.

1. 환경 설정
라즈베리파이 설정
최신 라즈비안 운영체제를 설치하고, 네트워크 설정을 완료합니다.
Python과 필요한 패키지 설치:
bash
코드 복사
sudo apt update
sudo apt install python3-pip
pip3 install Flask psutil
2. 플라스크 서버 구축
플라스크 서버는 라즈베리파이의 시스템 상태(예: CPU 사용량, 메모리 사용량)를 클라이언트(리액트 애플리케이션)로 전송합니다.

app.py 파일 생성
python
코드 복사
from flask import Flask, jsonify
import psutil

app = Flask(__name__)

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
3. 리액트 애플리케이션 구축
리액트 애플리케이션은 플라스크 서버에서 시스템 상태를 받아와 화면에 표시합니다.

리액트 프로젝트 생성
bash
코드 복사
npx create-react-app raspberrypi-status
cd raspberrypi-status
npm start
App.js 수정
javascript
코드 복사
import React, { useState, useEffect } from 'react';
import './App.css';

function App() {
  const [status, setStatus] = useState(null);

  useEffect(() => {
    fetch('/api/status')
      .then(response => response.json())
      .then(data => setStatus(data))
      .catch(error => console.error('Error fetching status:', error));
  }, []);

  return (
    <div className="App">
      <header className="App-header">
        <h1>Raspberry Pi System Status</h1>
        {status ? (
          <div>
            <h2>CPU Usage: {status.cpu}%</h2>
            <h2>Memory Usage: {status.memory.percent}%</h2>
            <h2>Disk Usage: {status.disk.percent}%</h2>
          </div>
        ) : (
          <p>Loading...</p>
        )}
      </header>
    </div>
  );
}

export default App;
4. CORS 설정
플라스크 서버와 리액트 클라이언트가 서로 다른 포트에서 동작하므로 CORS 설정이 필요할 수 있습니다.

app.py에 CORS 설정 추가
bash
코드 복사
pip3 install flask-cors
python
코드 복사
from flask_cors import CORS

app = Flask(__name__)
CORS(app)
5. 서버 및 클라이언트 실행
플라스크 서버 실행:

bash
코드 복사
python3 app.py
리액트 클라이언트 실행:

bash
코드 복사
npm start
6. 통신 테스트
브라우저에서 http://<라즈베리파이_IP>:3000에 접속하여 리액트 애플리케이션이 라즈베리파이의 시스템 상태를 올바르게 표시하는지 확인합니다.
이제 플라스크와 리액트를 사용하여 라즈베리파이의 시스템 상태를 전송하는 서버가 구축되었습니다.

대략 어떤 모습의 화면인지 미리보기를 나타내라 
ChatGPT

Here's a preview of the web interface showing the system status of a Raspberry Pi. The design is clean and modern, with sections for CPU Usage, Memory Usage, and Disk Usage, each displaying corresponding percentages. This gives a clear and user-friendly view of the system status.

Bootstrap
과 리액트를 비교하라 
ChatGPT
Bootstrap과 리액트는 웹 개발에서 자주 사용되는 두 가지 도구이지만, 그 목적과 기능은 크게 다릅니다. 아래는 두 기술의 주요 특징과 차이점을 비교한 것입니다.

1. 목적 및 기능
Bootstrap:

목적: 웹 페이지의 스타일링과 레이아웃을 손쉽게 구현하기 위한 CSS 프레임워크.
기능: 반응형 그리드 시스템, 다양한 UI 컴포넌트(버튼, 폼, 네비게이션 등), CSS 유틸리티 클래스 제공.
React:

목적: 동적이고 상호작용적인 사용자 인터페이스(UI)를 구축하기 위한 자바스크립트 라이브러리.
기능: 컴포넌트 기반 아키텍처, 가상 DOM, 상태 관리, 단방향 데이터 흐름 제공.
2. 주요 특징
Bootstrap:

CSS 기반: HTML 요소의 스타일링과 레이아웃을 간편하게 구현.
반응형 디자인: 다양한 디바이스에 대응하는 레이아웃 구현 가능.
미리 디자인된 컴포넌트: 버튼, 카드, 모달 등 다양한 UI 컴포넌트 제공.
React:

컴포넌트 기반: UI를 독립적이고 재사용 가능한 컴포넌트로 구성.
가상 DOM: 실제 DOM과 비교하여 변경된 부분만 업데이트하여 성능 최적화.
상태 관리: 컴포넌트의 상태를 효율적으로 관리하고 업데이트.
3. 사용 방식
Bootstrap:

HTML과 CSS 중심: 클래스 이름을 HTML 요소에 추가하여 스타일 적용.
자바스크립트 플러그인: 추가적인 상호작용을 위해 jQuery 기반의 자바스크립트 플러그인 제공.
React:

자바스크립트 중심: JSX를 사용하여 자바스크립트 내에서 HTML과 같은 문법으로 UI 구성.
상태 및 이벤트 관리: 컴포넌트의 상태와 이벤트를 자바스크립트로 처리.
4. 학습 곡선
Bootstrap:

쉬움: 기본적인 HTML과 CSS 지식만 있으면 쉽게 사용 가능.
빠른 시작: 미리 디자인된 템플릿과 컴포넌트를 사용하여 빠르게 UI 구현 가능.
React:

어려움: 자바스크립트와 ES6 문법, 그리고 React의 개념(컴포넌트, 상태, props 등)에 대한 이해 필요.
구조적 설계: 복잡한 애플리케이션 구조를 설계하고 관리하는 데 필요한 추가 학습 필요.
5. 확장성 및 커뮤니티
Bootstrap:

성숙된 생태계: 오랜 기간 동안 많은 프로젝트에서 사용되어 다양한 리소스와 플러그인 존재.
디자인 일관성: 표준화된 디자인 컴포넌트를 사용하여 일관된 UI 구현.
React:

활발한 커뮤니티: Facebook에서 개발하고 유지보수하며, 많은 개발자들이 사용하여 방대한 리소스와 라이브러리 존재.
유연한 통합: 다양한 상태 관리 라이브러리(Redux, MobX 등) 및 라우터(React Router)와의 통합 가능.
결론
Bootstrap과 React는 상호 보완적인 기술로, 각각의 목적과 기능이 다릅니다. Bootstrap은 스타일링과 레이아웃을 쉽게 구현하는 데 중점을 두고 있으며, React는 동적이고 복잡한 사용자 인터페이스를 구축하는 데 중점을 둡니다. 두 기술을 함께 사용하면, Bootstrap으로 스타일링된 React 컴포넌트를 만들어 강력하고 일관된 UI를 구현할 수 있습니다.

Bootstrap 으로 프런트를 보이도록 하고 플라스크로 백엔드를 구사하여 라즈베리파이의 시스템 정보를 서버링하라 
ChatGPT
Bootstrap을 사용하여 프론트엔드를 디자인하고 Flask를 사용하여 백엔드를 구현하여 라즈베리파이의 시스템 정보를 제공하는 서버를 구축하는 예제를 보여드리겠습니다. 이 예제에서는 Flask를 통해 시스템 정보를 수집하고, Bootstrap을 사용하여 그 정보를 사용자에게 시각적으로 표시합니다.

1. 환경 설정
라즈베리파이 설정
최신 라즈비안 운영체제를 설치하고, 네트워크 설정을 완료합니다.
Python과 필요한 패키지 설치:
bash
코드 복사
sudo apt update
sudo apt install python3-pip
pip3 install Flask psutil flask-cors
2. Flask 서버 구축
플라스크 서버는 라즈베리파이의 시스템 상태를 클라이언트로 전송합니다.

app.py 파일 생성
python
코드 복사
from flask import Flask, jsonify
from flask_cors import CORS
import psutil

app = Flask(__name__)
CORS(app)

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
3. Bootstrap과 HTML로 프론트엔드 구축
Bootstrap을 사용하여 프론트엔드를 디자인합니다.

templates/index.html 파일 생성
html
코드 복사
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Raspberry Pi System Status</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .status-container {
            margin-top: 50px;
        }
        .status-card {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container status-container">
        <div class="row">
            <div class="col-md-4 status-card">
                <div class="card text-white bg-primary mb-3">
                    <div class="card-header">CPU Usage</div>
                    <div class="card-body">
                        <h5 class="card-title" id="cpu">Loading...</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-4 status-card">
                <div class="card text-white bg-success mb-3">
                    <div class="card-header">Memory Usage</div>
                    <div class="card-body">
                        <h5 class="card-title" id="memory">Loading...</h5>
                    </div>
                </div>
            </div>
            <div class="col-md-4 status-card">
                <div class="card text-white bg-warning mb-3">
                    <div class="card-header">Disk Usage</div>
                    <div class="card-body">
                        <h5 class="card-title" id="disk">Loading...</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            function fetchStatus() {
                $.ajax({
                    url: '/api/status',
                    method: 'GET',
                    success: function(data) {
                        $('#cpu').text(data.cpu + '%');
                        $('#memory').text(data.memory.percent + '%');
                        $('#disk').text(data.disk.percent + '%');
                    },
                    error: function() {
                        $('#cpu').text('Error');
                        $('#memory').text('Error');
                        $('#disk').text('Error');
                    }
                });
            }

            fetchStatus();
            setInterval(fetchStatus, 5000); // 5초마다 상태 갱신
        });
    </script>
</body>
</html>
4. Flask에서 HTML 파일 서빙
Flask가 HTML 파일을 서빙하도록 설정합니다.

app.py에 HTML 서빙 추가
python
코드 복사
from flask import Flask, jsonify, render_template
from flask_cors import CORS
import psutil

app = Flask(__name__)
CORS(app)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
5. 서버 실행
플라스크 서버 실행:
bash
코드 복사
python3 app.py
6. 브라우저에서 확인
브라우저에서 http://<라즈베리파이_IP>:5000에 접속하여 라즈베리파이의 시스템 상태를 표시하는 웹 인터페이스를 확인합니다.
이제 Bootstrap과 Flask를 사용하여 라즈베리파이의 시스템 정보를 표시하는 웹 애플리케이션이 완성되었습니다.

미리버기로 결과를 보여라 
ChatGPT

여기 라즈베리파이의 시스템 상태를 보여주는 웹 인터페이스의 미리보기입니다. Bootstrap을 사용하여 CPU 사용량, 메모리 사용량, 디스크 사용량을 각각 카드 형식으로 시각적으로 표시하고 있습니다. 페이지 디자인은 깔끔하고 현대적이며, 사용하기 쉽도록 구성되어 있습니다.

dashboard.css
파일
dashboard.js
JavaScript
dashboard.rtl.css
파일
index.html
파일
이 예제 템블릿을 수정하여 라즈베리파이의 시스템 상태를 보는 코드로 수정하고, 좌측의 버튼중에서 라즈베리파이 카메라 영상을 보는 버튼을 만들고 메인 화면에 영상이 나오게 하라, 그리고 라즈베리파이에 연결된 워터 펌프를 제어하는 버튼도 추가하고 상태를 나타내는 것을 메인 화면에 하라 
ChatGPT
1. Flask 서버 수정
라즈베리파이의 시스템 상태를 가져오는 API와 카메라 스트림, 워터 펌프 제어를 위한 API를 추가합니다.

app.py 수정
python
코드 복사
from flask import Flask, jsonify, Response, request
from flask_cors import CORS
import psutil
import cv2
import RPi.GPIO as GPIO

app = Flask(__name__)
CORS(app)

# GPIO setup for water pump
GPIO.setmode(GPIO.BCM)
PUMP_PIN = 18
GPIO.setup(PUMP_PIN, GPIO.OUT)
GPIO.output(PUMP_PIN, GPIO.LOW)

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

def gen_frames():
    camera = cv2.VideoCapture(0)
    while True:
        success, frame = camera.read()
        if not success:
            break
        else:
            ret, buffer = cv2.imencode('.jpg', frame)
            frame = buffer.tobytes()
            yield (b'--frame\r\n'
                   b'Content-Type: image/jpeg\r\n\r\n' + frame + b'\r\n')

@app.route('/video_feed')
def video_feed():
    return Response(gen_frames(), mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/api/pump', methods=['POST'])
def control_pump():
    action = request.json.get('action')
    if action == 'on':
        GPIO.output(PUMP_PIN, GPIO.HIGH)
        return jsonify({'status': 'Pump turned on'})
    elif action == 'off':
        GPIO.output(PUMP_PIN, GPIO.LOW)
        return jsonify({'status': 'Pump turned off'})
    else:
        return jsonify({'status': 'Invalid action'}), 400

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
2. 프론트엔드 HTML 수정
프론트엔드에서 시스템 상태를 보여주고, 카메라 스트림과 워터 펌프 제어를 추가합니다.

index.html 수정
html
코드 복사
<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
    <script src="../assets/js/color-modes.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.122.0">
    <title>Dashboard Template · Bootstrap v5.3</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/dashboard/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }
        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
        .b-example-divider {
            width: 100%;
            height: 3rem;
            background-color: rgba(0, 0, 0, .1);
            border: solid rgba(0, 0, 0, .15);
            border-width: 1px 0;
            box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }
        .b-example-vr {
            flex-shrink: 0;
            width: 1.5rem;
            height: 100vh;
        }
        .bi {
            vertical-align: -.125em;
            fill: currentColor;
        }
        .nav-scroller {
            position: relative;
            z-index: 2;
            height: 2.75rem;
            overflow-y: hidden;
        }
        .nav-scroller .nav {
            display: flex;
            flex-wrap: nowrap;
            padding-bottom: 1rem;
            margin-top: -1px;
            overflow-x: auto;
            text-align: center;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
        .btn-bd-primary {
            --bd-violet-bg: #712cf9;
            --bd-violet-rgb: 112.520718, 44.062154, 249.437846;
            --bs-btn-font-weight: 600;
            --bs-btn-color: var(--bs-white);
            --bs-btn-bg: var(--bd-violet-bg);
            --bs-btn-border-color: var(--bd-violet-bg);
            --bs-btn-hover-color: var(--bs-white);
            --bs-btn-hover-bg: #6528e0;
            --bs-btn-hover-border-color: #6528e0;
            --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
            --bs-btn-active-color: var(--bs-btn-hover-color);
            --bs-btn-active-bg: #5a23c8;
            --bs-btn-active-border-color: #5a23c8;
        }
        .bd-mode-toggle {
            z-index: 1500;
        }
        .bd-mode-toggle .dropdown-menu .active .bi {
            display: block !important;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="dashboard.css" rel="stylesheet">
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="check2" viewBox="0 0 16 16">
            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
        </symbol>
        <symbol id="circle-half" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
        </symbol>
        <symbol id="moon-stars-fill" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
        <symbol id="sun-fill" viewBox="0 0 16 16">
            <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
    </svg>

    <header class="navbar sticky-top bg-dark flex-md-nowrap p-0 shadow" data-bs-theme="dark">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6 text-white" href="#">Raspberry Pi Dashboard</a>
        <ul class="navbar-nav flex-row d-md-none">
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSearch" aria-controls="navbarSearch" aria-expanded="false" aria-label="Toggle search">
                    <svg class="bi"><use xlink:href="#search"/></svg>
                </button>
            </li>
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                    <svg class="bi"><use xlink:href="#list"/></svg>
                </button>
            </li>
        </ul>
        <div id="navbarSearch" class="navbar-search w-100 collapse">
            <input class="form-control w-100 rounded-0 border-0" type="text" placeholder="Search" aria-label="Search">
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-body-tertiary">
                <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="sidebarMenuLabel">Raspberry Pi Dashboard</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2 active" aria-current="page" href="#">
                                    <svg class="bi"><use xlink:href="#house-fill"/></svg>
                                    Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" href="#">
                                    <svg class="bi"><use xlink:href="#camera"/></svg>
                                    Camera Feed
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" href="#">
                                    <svg class="bi"><use xlink:href="#droplet"/></svg>
                                    Water Pump
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Dashboard</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
                            <svg class="bi"><use xlink:href="#calendar3"/></svg>
                            This week
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="card text-white bg-primary mb-3">
                            <div class="card-header">CPU Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="cpu">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-success mb-3">
                            <div class="card-header">Memory Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="memory">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-warning mb-3">
                            <div class="card-header">Disk Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="disk">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Camera Feed</h2>
                        <img src="/video_feed" class="img-fluid" alt="Camera Feed">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Water Pump Control</h2>
                        <button id="pump-on" class="btn btn-success">Turn On</button>
                        <button id="pump-off" class="btn btn-danger">Turn Off</button>
                        <p id="pump-status">Pump is off</p>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            function fetchStatus() {
                $.ajax({
                    url: '/api/status',
                    method: 'GET',
                    success: function(data) {
                        $('#cpu').text(data.cpu + '%');
                        $('#memory').text(data.memory.percent + '%');
                        $('#disk').text(data.disk.percent + '%');
                    },
                    error: function() {
                        $('#cpu').text('Error');
                        $('#memory').text('Error');
                        $('#disk').text('Error');
                    }
                });
            }

            fetchStatus();
            setInterval(fetchStatus, 5000); // 5초마다 상태 갱신

            $('#pump-on').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'on' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is on');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });

            $('#pump-off').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'off' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is off');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });
        });
    </script>
</body>
</html>
이 코드는 라즈베리파이의 시스템 상태를 표시하고, 카메라 피드와 워터 펌프 제어 기능을 포함한 대시보드입니다. Flask 서버는 API를 제공하며, 프론트엔드는 Bootstrap을 사용하여 구성되었습니다.

ModuleNotFoundError: No module named 'flask_cors'
in system python on rpi5
ChatGPT
해당 오류는 flask_cors 모듈이 설치되지 않았기 때문에 발생합니다. 다음 명령어를 사용하여 flask_cors를 설치할 수 있습니다:

bash
코드 복사
pip3 install flask-cors
만약 pip3 명령어가 동작하지 않는다면, pip 명령어를 대신 사용해 보세요:

bash
코드 복사
pip install flask-cors
이후 Flask 애플리케이션을 다시 실행하면 오류가 해결될 것입니다.

다음은 다시 한 번 정리된 Flask 서버 설정 코드입니다:

Flask 서버 설정
app.py 파일
python
코드 복사
from flask import Flask, jsonify, Response, request
from flask_cors import CORS
import psutil
import cv2
import RPi.GPIO as GPIO

app = Flask(__name__)
CORS(app)

# GPIO setup for water pump
GPIO.setmode(GPIO.BCM)
PUMP_PIN = 18
GPIO.setup(PUMP_PIN, GPIO.OUT)
GPIO.output(PUMP_PIN, GPIO.LOW)

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

def gen_frames():
    camera = cv2.VideoCapture(0)
    while True:
        success, frame = camera.read()
        if not success:
            break
        else:
            ret, buffer = cv2.imencode('.jpg', frame)
            frame = buffer.tobytes()
            yield (b'--frame\r\n'
                   b'Content-Type: image/jpeg\r\n\r\n' + frame + b'\r\n')

@app.route('/video_feed')
def video_feed():
    return Response(gen_frames(), mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/api/pump', methods=['POST'])
def control_pump():
    action = request.json.get('action')
    if action == 'on':
        GPIO.output(PUMP_PIN, GPIO.HIGH)
        return jsonify({'status': 'Pump turned on'})
    elif action == 'off':
        GPIO.output(PUMP_PIN, GPIO.LOW)
        return jsonify({'status': 'Pump turned off'})
    else:
        return jsonify({'status': 'Invalid action'}), 400

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
프론트엔드 설정
index.html 파일
위의 Flask 서버를 기반으로 하는 프론트엔드 설정은 이전에 제공한 index.html 파일과 동일합니다. 해당 파일을 templates 폴더에 위치시키고 Flask가 이를 렌더링할 수 있도록 설정합니다.

이제 Flask 서버를 다시 실행하면 flask_cors 오류 없이 제대로 작동할 것입니다.

Not Found
The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again : how to fixit?
ChatGPT
이 오류는 Flask 서버가 요청한 URL을 처리할 수 없는 경우 발생합니다. 아래의 단계에 따라 문제를 해결할 수 있습니다:

Flask 서버가 실행 중인지 확인: 서버가 제대로 실행되고 있는지 확인합니다.

bash
코드 복사
python3 app.py
라우트 확인: 요청한 URL이 Flask 애플리케이션에 정의된 라우트와 일치하는지 확인합니다. 기본적으로 제공된 라우트는 /api/status, /video_feed, /api/pump입니다.

HTML 파일 경로 확인: index.html 파일이 Flask 서버에서 올바르게 서빙되고 있는지 확인합니다.

Flask 코드 점검
app.py
Flask 코드에서 HTML 파일을 렌더링하는 라우트를 추가합니다.

python
코드 복사
from flask import Flask, jsonify, Response, request, render_template
from flask_cors import CORS
import psutil
import cv2
import RPi.GPIO as GPIO

app = Flask(__name__)
CORS(app)

# GPIO setup for water pump
GPIO.setmode(GPIO.BCM)
PUMP_PIN = 18
GPIO.setup(PUMP_PIN, GPIO.OUT)
GPIO.output(PUMP_PIN, GPIO.LOW)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

def gen_frames():
    camera = cv2.VideoCapture(0)
    while True:
        success, frame = camera.read()
        if not success:
            break
        else:
            ret, buffer = cv2.imencode('.jpg', frame)
            frame = buffer.tobytes()
            yield (b'--frame\r\n'
                   b'Content-Type: image/jpeg\r\n\r\n' + frame + b'\r\n')

@app.route('/video_feed')
def video_feed():
    return Response(gen_frames(), mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/api/pump', methods=['POST'])
def control_pump():
    action = request.json.get('action')
    if action == 'on':
        GPIO.output(PUMP_PIN, GPIO.HIGH)
        return jsonify({'status': 'Pump turned on'})
    elif action == 'off':
        GPIO.output(PUMP_PIN, GPIO.LOW)
        return jsonify({'status': 'Pump turned off'})
    else:
        return jsonify({'status': 'Invalid action'}), 400

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
디렉터리 구조 확인
index.html 파일이 Flask 템플릿 폴더 안에 있는지 확인합니다. Flask는 기본적으로 templates 폴더 안에서 HTML 파일을 찾습니다.

plaintext
코드 복사
project/
├── app.py
├── templates/
│   └── index.html
└── static/
    └── dashboard.css
    └── dashboard.js
    └── dashboard.rtl.css
index.html 파일 업데이트
HTML 파일은 이전에 제공한 내용을 유지하면서, 아래와 같이 추가 경로를 조정합니다:

html
코드 복사
<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
    <script src="{{ url_for('static', filename='color-modes.js') }}"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.122.0">
    <title>Dashboard Template · Bootstrap v5.3</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/dashboard/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="https://getbootstrap.com/docs/5.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/examples/dashboard/dashboard.css" rel="stylesheet">
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="check2" viewBox="0 0 16 16">
            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
        </symbol>
        <symbol id="circle-half" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
        </symbol>
        <symbol id="moon-stars-fill" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
        <symbol id="sun-fill" viewBox="0 0 16 16">
            <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
    </svg>

    <header class="navbar sticky-top bg-dark flex-md-nowrap p-0 shadow" data-bs-theme="dark">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6 text-white" href="#">Raspberry Pi Dashboard</a>
        <ul class="navbar-nav flex-row d-md-none">
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSearch" aria-controls="navbarSearch" aria-expanded="false" aria-label="Toggle search">
                    <svg class="bi"><use xlink:href="#search"/></svg>
                </button>
            </li>
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                    <svg class="bi"><use xlink:href="#list"/></svg>
                </button>
            </li>
        </ul>
        <div id="navbarSearch" class="navbar-search w-100 collapse">
            <input class="form-control w-100 rounded-0 border-0" type="text" placeholder="Search" aria-label="Search">
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-body-tertiary">
                <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="sidebarMenuLabel">Raspberry Pi Dashboard</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2 active" aria-current="page" href="#">
                                    <svg class="bi"><use xlink:href="#house-fill"/></svg>
                                    Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" href="#">
                                    <svg class="bi"><use xlink:href="#camera"/></svg>
                                    Camera Feed
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" href="#">
                                    <svg class="bi"><use xlink:href="#droplet"/></svg>
                                    Water Pump
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Dashboard</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
                            <svg class="bi"><use xlink:href="#calendar3"/></svg>
                            This week
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="card text-white bg-primary mb-3">
                            <div class="card-header">CPU Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="cpu">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-success mb-3">
                            <div class="card-header">Memory Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="memory">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-warning mb-3">
                            <div class="card-header">Disk Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="disk">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Camera Feed</h2>
                        <img src="/video_feed" class="img-fluid" alt="Camera Feed">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Water Pump Control</h2>
                        <button id="pump-on" class="btn btn-success">Turn On</button>
                        <button id="pump-off" class="btn btn-danger">Turn Off</button>
                        <p id="pump-status">Pump is off</p>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            function fetchStatus() {
                $.ajax({
                    url: '/api/status',
                    method: 'GET',
                    success: function(data) {
                        $('#cpu').text(data.cpu + '%');
                        $('#memory').text(data.memory.percent + '%');
                        $('#disk').text(data.disk.percent + '%');
                    },
                    error: function() {
                        $('#cpu').text('Error');
                        $('#memory').text('Error');
                        $('#disk').text('Error');
                    }
                });
            }

            fetchStatus();
            setInterval(fetchStatus, 5000); // 5초마다 상태 갱신

            $('#pump-on').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'on' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is on');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });

            $('#pump-off').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'off' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is off');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });
        });
    </script>
</body>
</html>
이제 Flask 서버를 다시 시작하고, 브라우저에서 서버의 IP 주소를 입력하여 페이지를 확인하십시오. http://<라즈베리파이_IP>:5000 URL로 접근하여 제대로 동작하는지 확인합니다.

camera feed button are ? status on button text. how to solve this problem?
ChatGPT
아래는 카메라 피드를 표시하는 버튼과 워터 펌프 상태를 제어하는 버튼을 포함하여 상태 업데이트를 올바르게 처리하도록 수정된 코드를 제공합니다. 버튼을 클릭하면 카메라 피드를 표시하고, 워터 펌프 상태를 제어할 수 있습니다.

1. Flask 서버 수정
이미지 스트리밍 및 워터 펌프 제어 기능을 제공하는 Flask 서버 설정.

app.py
python
코드 복사
from flask import Flask, jsonify, Response, request, render_template
from flask_cors import CORS
import psutil
import cv2
import RPi.GPIO as GPIO

app = Flask(__name__)
CORS(app)

# GPIO setup for water pump
GPIO.setmode(GPIO.BCM)
PUMP_PIN = 18
GPIO.setup(PUMP_PIN, GPIO.OUT)
GPIO.output(PUMP_PIN, GPIO.LOW)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

def gen_frames():
    camera = cv2.VideoCapture(0)
    while True:
        success, frame = camera.read()
        if not success:
            break
        else:
            ret, buffer = cv2.imencode('.jpg', frame)
            frame = buffer.tobytes()
            yield (b'--frame\r\n'
                   b'Content-Type: image/jpeg\r\n\r\n' + frame + b'\r\n')

@app.route('/video_feed')
def video_feed():
    return Response(gen_frames(), mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/api/pump', methods=['POST'])
def control_pump():
    action = request.json.get('action')
    if action == 'on':
        GPIO.output(PUMP_PIN, GPIO.HIGH)
        return jsonify({'status': 'Pump turned on'})
    elif action == 'off':
        GPIO.output(PUMP_PIN, GPIO.LOW)
        return jsonify({'status': 'Pump turned off'})
    else:
        return jsonify({'status': 'Invalid action'}), 400

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
2. 프론트엔드 HTML 수정
프론트엔드에서 시스템 상태를 보여주고, 카메라 스트림과 워터 펌프 제어를 추가합니다.

index.html
html
코드 복사
<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
    <script src="{{ url_for('static', filename='color-modes.js') }}"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.122.0">
    <title>Raspberry Pi Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="https://getbootstrap.com/docs/5.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='dashboard.css') }}" rel="stylesheet">
    <style>
        .camera-feed {
            display: none;
        }
    </style>
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="check2" viewBox="0 0 16 16">
            <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
        </symbol>
        <symbol id="circle-half" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
        </symbol>
        <symbol id="moon-stars-fill" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
        <symbol id="sun-fill" viewBox="0 0 16 16">
            <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
    </svg>

    <header class="navbar sticky-top bg-dark flex-md-nowrap p-0 shadow" data-bs-theme="dark">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6 text-white" href="#">Raspberry Pi Dashboard</a>
        <ul class="navbar-nav flex-row d-md-none">
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSearch" aria-controls="navbarSearch" aria-expanded="false" aria-label="Toggle search">
                    <svg class="bi"><use xlink:href="#search"/></svg>
                </button>
            </li>
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                    <svg class="bi"><use xlink:href="#list"/></svg>
                </button>
            </li>
        </ul>
        <div id="navbarSearch" class="navbar-search w-100 collapse">
            <input class="form-control w-100 rounded-0 border-0" type="text" placeholder="Search" aria-label="Search">
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-body-tertiary">
                <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="sidebarMenuLabel">Raspberry Pi Dashboard</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2 active" aria-current="page" href="#">
                                    <svg class="bi"><use xlink:href="#house-fill"/></svg>
                                    Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" id="camera-feed-toggle" href="#">
                                    <svg class="bi"><use xlink:href="#camera"/></svg>
                                    Camera Feed
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" href="#">
                                    <svg class="bi"><use xlink:href="#droplet"/></svg>
                                    Water Pump
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Dashboard</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
                            <svg class="bi"><use xlink:href="#calendar3"/></svg>
                            This week
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="card text-white bg-primary mb-3">
                            <div class="card-header">CPU Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="cpu">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-success mb-3">
                            <div class="card-header">Memory Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="memory">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-warning mb-3">
                            <div class="card-header">Disk Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="disk">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 camera-feed">
                        <h2>Camera Feed</h2>
                        <img src="/video_feed" class="img-fluid" alt="Camera Feed">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Water Pump Control</h2>
                        <button id="pump-on" class="btn btn-success">Turn On</button>
                        <button id="pump-off" class="btn btn-danger">Turn Off</button>
                        <p id="pump-status">Pump is off</p>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            function fetchStatus() {
                $.ajax({
                    url: '/api/status',
                    method: 'GET',
                    success: function(data) {
                        $('#cpu').text(data.cpu + '%');
                        $('#memory').text(data.memory.percent + '%');
                        $('#disk').text(data.disk.percent + '%');
                    },
                    error: function() {
                        $('#cpu').text('Error');
                        $('#memory').text('Error');
                        $('#disk').text('Error');
                    }
                });
            }

            fetchStatus();
            setInterval(fetchStatus, 5000); // 5초마다 상태 갱신

            $('#pump-on').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'on' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is on');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });

            $('#pump-off').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'off' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is off');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });

            $('#camera-feed-toggle').click(function(e) {
                e.preventDefault();
                $('.camera-feed').toggle();
            });
        });
    </script>
</body>
</html>
이제 Flask 서버를 다시 시작하고, 브라우저에서 서버의 IP 주소를 입력하여 페이지를 확인하십시오. http://<라즈베리파이_IP>:5000 URL로 접근하여 제대로 동작하는지 확인합니다. 'Camera Feed' 버튼을 클릭하면 카메라 피드가 표시되며, 워터 펌프 상태를 제어하는 버튼이 올바르게 동작하는지 확인합니다.

라즈베리파이의 서버로 아이폰의 웹 브라이저로 접속하고, 웹 페이지에서 글자(스마트 팜 명령문)를 입력하는 태그를 만들고
그곳에 아이폰의 음성인식 기능을 이용하여 글자를 입력한다. 그리고 전송 버튼을 누르면 라즈베리파이가 스마트 팜의 펌프를 켜거나 조명을 제어하도록 한다. 
이를 위한 웹 프론트 엔드와 백엔드(flask 기반 파이썬) 코드를 추가적으로 작성하라 
ChatGPT
다음은 아이폰의 음성 인식 기능을 이용해 글자를 입력하고, 전송 버튼을 통해 라즈베리파이의 펌프와 조명을 제어하는 웹 프론트엔드와 Flask 백엔드 코드를 작성하는 방법입니다.

1. Flask 백엔드 설정
app.py 파일 수정
Flask 서버에서 스마트 팜 명령을 처리할 수 있도록 라우트를 추가합니다.

python
코드 복사
from flask import Flask, jsonify, Response, request, render_template
from flask_cors import CORS
import psutil
import cv2
import RPi.GPIO as GPIO

app = Flask(__name__)
CORS(app)

# GPIO setup for water pump and light
GPIO.setmode(GPIO.BCM)
PUMP_PIN = 18
LIGHT_PIN = 23
GPIO.setup(PUMP_PIN, GPIO.OUT)
GPIO.setup(LIGHT_PIN, GPIO.OUT)
GPIO.output(PUMP_PIN, GPIO.LOW)
GPIO.output(LIGHT_PIN, GPIO.LOW)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/api/status', methods=['GET'])
def get_status():
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory()
    disk = psutil.disk_usage('/')
    
    status = {
        'cpu': cpu,
        'memory': {
            'total': memory.total,
            'available': memory.available,
            'percent': memory.percent,
            'used': memory.used,
            'free': memory.free
        },
        'disk': {
            'total': disk.total,
            'used': disk.used,
            'free': disk.free,
            'percent': disk.percent
        }
    }
    
    return jsonify(status)

def gen_frames():
    camera = cv2.VideoCapture(0)
    while True:
        success, frame = camera.read()
        if not success:
            break
        else:
            ret, buffer = cv2.imencode('.jpg', frame)
            frame = buffer.tobytes()
            yield (b'--frame\r\n'
                   b'Content-Type: image/jpeg\r\n\r\n' + frame + b'\r\n')

@app.route('/video_feed')
def video_feed():
    return Response(gen_frames(), mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/api/pump', methods=['POST'])
def control_pump():
    action = request.json.get('action')
    if action == 'on':
        GPIO.output(PUMP_PIN, GPIO.HIGH)
        return jsonify({'status': 'Pump turned on'})
    elif action == 'off':
        GPIO.output(PUMP_PIN, GPIO.LOW)
        return jsonify({'status': 'Pump turned off'})
    else:
        return jsonify({'status': 'Invalid action'}), 400

@app.route('/api/light', methods=['POST'])
def control_light():
    action = request.json.get('action')
    if action == 'on':
        GPIO.output(LIGHT_PIN, GPIO.HIGH)
        return jsonify({'status': 'Light turned on'})
    elif action == 'off':
        GPIO.output(LIGHT_PIN, GPIO.LOW)
        return jsonify({'status': 'Light turned off'})
    else:
        return jsonify({'status': 'Invalid action'}), 400

@app.route('/api/command', methods=['POST'])
def handle_command():
    command = request.json.get('command').lower()
    if 'pump on' in command:
        GPIO.output(PUMP_PIN, GPIO.HIGH)
        return jsonify({'status': 'Pump turned on'})
    elif 'pump off' in command:
        GPIO.output(PUMP_PIN, GPIO.LOW)
        return jsonify({'status': 'Pump turned off'})
    elif 'light on' in command:
        GPIO.output(LIGHT_PIN, GPIO.HIGH)
        return jsonify({'status': 'Light turned on'})
    elif 'light off' in command:
        GPIO.output(LIGHT_PIN, GPIO.LOW)
        return jsonify({'status': 'Light turned off'})
    else:
        return jsonify({'status': 'Unknown command'}), 400

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
2. 프론트엔드 HTML 설정
index.html 수정
웹 페이지에서 음성 인식 기능을 이용해 글자를 입력하고, 전송 버튼을 추가합니다.

html
코드 복사
<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
    <script src="{{ url_for('static', filename='color-modes.js') }}"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.122.0">
    <title>Raspberry Pi Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link href="https://getbootstrap.com/docs/5.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='dashboard.css') }}" rel="stylesheet">
</head>
<body>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <!-- SVG symbols here -->
    </svg>

    <header class="navbar sticky-top bg-dark flex-md-nowrap p-0 shadow" data-bs-theme="dark">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6 text-white" href="#">Raspberry Pi Dashboard</a>
        <ul class="navbar-nav flex-row d-md-none">
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSearch" aria-controls="navbarSearch" aria-expanded="false" aria-label="Toggle search">
                    <svg class="bi"><use xlink:href="#search"/></svg>
                </button>
            </li>
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-white" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                    <svg class="bi"><use xlink:href="#list"/></svg>
                </button>
            </li>
        </ul>
        <div id="navbarSearch" class="navbar-search w-100 collapse">
            <input class="form-control w-100 rounded-0 border-0" type="text" placeholder="Search" aria-label="Search">
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-body-tertiary">
                <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="sidebarMenuLabel">Raspberry Pi Dashboard</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2 active" aria-current="page" href="#">
                                    <svg class="bi"><use xlink:href="#house-fill"/></svg>
                                    Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" id="camera-feed-toggle" href="#">
                                    <svg class="bi"><use xlink:href="#camera"/></svg>
                                    Camera Feed
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link d-flex align-items-center gap-2" href="#">
                                    <svg class="bi"><use xlink:href="#droplet"/></svg>
                                    Water Pump
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Dashboard</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
                            <svg class="bi"><use xlink:href="#calendar3"/></svg>
                            This week
                        </button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="card text-white bg-primary mb-3">
                            <div class="card-header">CPU Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="cpu">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-success mb-3">
                            <div class="card-header">Memory Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="memory">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-white bg-warning mb-3">
                            <div class="card-header">Disk Usage</div>
                            <div class="card-body">
                                <h5 class="card-title" id="disk">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 camera-feed">
                        <h2>Camera Feed</h2>
                        <img src="/video_feed" class="img-fluid" alt="Camera Feed">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Water Pump Control</h2>
                        <button id="pump-on" class="btn btn-success">Turn On</button>
                        <button id="pump-off" class="btn btn-danger">Turn Off</button>
                        <p id="pump-status">Pump is off</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Light Control</h2>
                        <button id="light-on" class="btn btn-success">Turn On</button>
                        <button id="light-off" class="btn btn-danger">Turn Off</button>
                        <p id="light-status">Light is off</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <h2>Smart Farm Command</h2>
                        <input type="text" id="command-input" class="form-control" placeholder="Enter command (e.g., 'Pump on', 'Light off')" />
                        <button id="send-command" class="btn btn-primary mt-2">Send Command</button>
                        <p id="command-status">Waiting for command...</p>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            function fetchStatus() {
                $.ajax({
                    url: '/api/status',
                    method: 'GET',
                    success: function(data) {
                        $('#cpu').text(data.cpu + '%');
                        $('#memory').text(data.memory.percent + '%');
                        $('#disk').text(data.disk.percent + '%');
                    },
                    error: function() {
                        $('#cpu').text('Error');
                        $('#memory').text('Error');
                        $('#disk').text('Error');
                    }
                });
            }

            fetchStatus();
            setInterval(fetchStatus, 5000); // 5초마다 상태 갱신

            $('#pump-on').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'on' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is on');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });

            $('#pump-off').click(function() {
                $.ajax({
                    url: '/api/pump',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'off' }),
                    success: function(data) {
                        $('#pump-status').text('Pump is off');
                    },
                    error: function() {
                        $('#pump-status').text('Error');
                    }
                });
            });

            $('#light-on').click(function() {
                $.ajax({
                    url: '/api/light',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'on' }),
                    success: function(data) {
                        $('#light-status').text('Light is on');
                    },
                    error: function() {
                        $('#light-status').text('Error');
                    }
                });
            });

            $('#light-off').click(function() {
                $.ajax({
                    url: '/api/light',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ action: 'off' }),
                    success: function(data) {
                        $('#light-status').text('Light is off');
                    },
                    error: function() {
                        $('#light-status').text('Error');
                    }
                });
            });

            $('#send-command').click(function() {
                var command = $('#command-input').val();
                $.ajax({
                    url: '/api/command',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ command: command }),
                    success: function(data) {
                        $('#command-status').text(data.status);
                    },
                    error: function() {
                        $('#command-status').text('Error');
                    }
                });
            });

            $('#camera-feed-toggle').click(function(e) {
                e.preventDefault();
                $('.camera-feed').toggle();
            });
        });
    </script>
</body>
</html>
3. 사용 방법
Flask 서버를 실행합니다.

bash
코드 복사
python3 app.py
아이폰의 웹 브라우저(예: Safari)에서 http://<라즈베리파이_IP>:5000에 접속합니다.

웹 페이지에서 "Smart Farm Command" 섹션에 음성 인식 기능을 이용해 명령어를 입력하고, "Send Command" 버튼을 눌러 명령어를 전송합니다. 가능한 명령어는 "Pump on", "Pump off", "Light on", "Light off"입니다. 각 명령어는 라즈베리파이에서 스마트 팜의 펌프와 조명을 제어합니다
